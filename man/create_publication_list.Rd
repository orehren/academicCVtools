% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_publication_list.R
\name{create_publication_list}
\alias{create_publication_list}
\title{Create a formatted publication list for Typst from a .bib file}
\usage{
create_publication_list(
  bib_file,
  author_name,
  csl_file,
  group_labels = c(article = "Journal Article", inproceedings = "Conference Paper",
    incollection = "Book Chapter", book = "Book", phdthesis = "PhD Thesis", mastersthesis
    = "Masters Thesis", techreport = "Technical Report", unpublished = "In Preparation",
    misc = "Miscellaneous"),
  default_label = "Other",
  group_order = NULL,
  pandoc_path = NULL,
  author_highlight_markup = "#strong[\%s]",
  typst_func_name = "publication-list"
)
}
\arguments{
\item{bib_file}{Path to the \code{.bib} bibliography file.}

\item{author_name}{The full name of the author to highlight in publications.}

\item{csl_file}{Path to the \code{.csl} citation style file for formatting.}

\item{group_labels}{A named character vector to map BibTeX entry types
(e.g., \code{article}) to user-friendly display labels (e.g., \code{"Journal Article"}).
Defaults to a standard set of academic publication types.}

\item{default_label}{The display label for any entry types not found in
\code{group_labels}. Defaults to \code{"Other"}.}

\item{group_order}{An optional character vector specifying the desired
display order of the \code{group_labels}. If \code{NULL}, groups are sorted
alphabetically.}

\item{pandoc_path}{An optional path to the Pandoc executable. If \code{NULL},
Pandoc is assumed to be in the system's PATH.}

\item{author_highlight_markup}{The Typst markup to apply for highlighting the
author. Must contain a \verb{\%s} placeholder for the author's name.
Defaults to \code{"#strong[\%s]"}, which makes the name bold.}

\item{typst_func_name}{The name of the Typst function that will receive the
publication data. Defaults to \code{"publication-list"}.}
}
\value{
A single character string containing a Typst code block (\verb{```\{=typst\} ... ```}).
If no valid publication entries are found, it returns an empty Typst array block.
This output is intended to be used in a Quarto document with \code{output: asis}.
}
\description{
This function provides a comprehensive workflow for generating a publication
list suitable for an academic CV in Typst. It reads a bibliography file,
processes it using Pandoc and a CSL stylesheet, and then groups, sorts, and
formats the entries into a Typst-ready code block.
}
\details{
The process follows these key steps:
\enumerate{
\item \strong{Argument Validation:} Ensures all inputs are correct and files exist.
\item \strong{Pandoc Execution:} Calls Pandoc with \code{citeproc} to convert the \code{.bib}
file into a structured JSON output.
\item \strong{JSON Parsing & Validation:} Parses the JSON and validates its structure.
\item \strong{Data Extraction:} Extracts metadata (e.g., citation key, year) and the
formatted citation strings from the JSON.
\item \strong{Processing:} Joins the metadata and formatted strings, assigns group
labels (e.g., "Journal Article"), and highlights the specified author's name.
\item \strong{Sorting:} Sorts the publications by group and then by year (descending).
\item \strong{Typst Output:} Generates the final Typst code block, which calls a
Typst function with the processed data.
}
}
\examples{
\dontrun{
# --- Setup: Create dummy files for a reproducible example ---
bib_content <- c(
  "@article{Author2023, author={Jane Doe}, title={A great paper}, year={2023}}",
  "@inproceedings{Author2022, author={Jane Doe}, title={A conference talk}, year={2022}}"
)
bib_file <- tempfile(fileext = ".bib")
writeLines(bib_content, bib_file)

csl_content <- '<?xml version="1.0" encoding="utf-8"?>
<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0">
  <info><title>Simple CSL</title><id>simple-csl</id></info>
  <bibliography><layout><text variable="title"/></layout></bibliography>
</style>'
csl_file <- tempfile(fileext = ".csl")
writeLines(csl_content, csl_file)

# --- Basic Usage ---
# This generates a Typst block with two publications, highlighting "Jane Doe".
typst_output <- create_publication_list(
  bib_file = bib_file,
  author_name = "Jane Doe",
  csl_file = csl_file
)
cat(typst_output)

# --- Custom Grouping and Order ---
custom_labels <- c(article = "Peer-Reviewed Papers", inproceedings = "Talks")
custom_order <- c("Peer-Reviewed Papers", "Talks")

typst_output_custom <- create_publication_list(
  bib_file = bib_file,
  author_name = "Jane Doe",
  csl_file = csl_file,
  group_labels = custom_labels,
  group_order = custom_order,
  author_highlight_markup = "#emph[\%s]" # Italicize the author
)
cat(typst_output_custom)

# --- Cleanup ---
unlink(bib_file)
unlink(csl_file)
}
}
